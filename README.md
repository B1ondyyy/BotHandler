**Изменения 16.01.2025:**

- Добавлена столбчатая диаграмма количества новых кластеров, выбросов, файлов шумов и тишины в окно визуализации. Находится ниже 3D визуализации кластеров.

- Дабавлена функция удаления гудков. Теперь в конце кластеризации в папках кластеров создаётся папка "Без гудков", в которой находятся оригинальные аудиофайлы без начального звука гудка.

- Исправлена ошибка присваивания названия кластеру. Добавлены знаки исключения для корректного сохранения названия.

**Изменения 19.12.2024:**

- Добавлен интерфейс. Теперь функции сегментации и кластеризации выполняются в отдельно открывающемся окне. Перед этим будет предложено добавить папку с аудиофайлами, которые надо обработать. Визуализация открывается автоматически после кластеризации. Плеер в визуализации отключён.

- Добавлена функция присваивания неймингов кластерам. Выполняется после кластеризации.
ВНИМАНИЕ! Если у вас не видеокарта от Nvidia, то программа будет работать на процессоре, что приведёт к очень долгому присваиванию неймингов. Рекомендуем запускать программу на специальном пк.

- Сегментация работает отдельно от кластеризации. Внутри папки "segment audio" создаются папки каждого обработанного аудио с его названием, внутри которых находятся сегменты этого аудио.

- В поле подробностей можно увидеть какой сейчас процесс выполняется и с какой точностью.

**Изменения 12.12.2024:**

- Добавлена CUDA. Если запустить программу на ПК с видеокартой от Nvidia, то мощности будут браться с этой видеокарты, а не с процессора. Благодаря этому кластеризация будет выполняться существенно быстрее.

- Сегментация не выполняется для файлов, которым был присвоен класс "Тишина" или "Шум".

**Изменения 20.11.2024:**

**Важно:** программа должна заранее иметь папку tmp_vad для корректной работы.

- В папки с кластерами сохраняются оригинальные аудиофайлы.

- Дабавлено разделение аудиофайлов на сегменты. Аудио разбивается на части, где был обнаружен голос. Все сегменты хранятся в папке segments_audio, которая создаётся автоматически после работы программы.

- Тишина и шум не пропускаются, а классифицируются в папки "Тишина" и "Шум" в папку со всеми кластерами. Шум классифицируется отлично, тишина требует доработки.



**INSTALL**
python3 -m venv ./.venv
source ./.venv/bin/activate
pip install -r ./requirements.txt


**Структура проекта**

**vad_preprocess.py**: Скрипт для предварительной обработки аудиофайлов (обнаружение активных участков речи с использованием Voice Activity Detection).

**main.py**: Основной скрипт, который запускает обработку, кластеризацию, визуализацию, создаёт CSV-файл с результатами кластеризации и организует Dash-сервер для отображения визуализации.

**папка tmp**: Содержит исходные аудиофайлы для предобработки. Все новые аудиофайлы следует поместить в эту папку перед запуском программы.

**excel файл Разметка 23-25.08.xlsx**: Необходим для сопоставления аудиофайлов с реальными классами. Файл должен содержать колонку Название файла (имена аудиофайлов с форматом wav) и колонку Класс (классификационные метки для каждого файла).

**requirements.txt**: Нужен для полуавтоматической загрузки всех необходимых библиотек для работы программы.


**Требования**:
- Добавьте ваши аудиофайлы, которые нужно кластеризовать в папку с названием "tmp". Важно чтобы аудиофайлов было не меньше 3-х.
- Установите все необходимые библиотеки с файла requirements.txt. Если вы используете среду разработки PyCharm, то в файле main.py вам предложат установить недостающие библиотеки сверху в жёлтом окне. В таком случае нажмите кнопку "Install requirements", и все нужные библиотеки начнут автоматическую установку;
- Версия python 3.10.
- Аудиофайлы должны иметь формат .wav.


**Запуск программы**:
1. Запустите файл main.py; or ./app_run.sh
2. Программа начнёт предобработку аудиофайлов и сохранит их в созданную папку tmp_vad. Если в аудиофайле голос не будет обнаружен, программа пропускает этот файл и в дальнейшем не кластеризует;
3. После этапа предобработки программа начнёт кластеризировать аудиофайлы. Сообщение "Нет данных по классу для файла: <название файла>" означает, что данный файл отсутствует в excel файле с разметкой. Это не критично, программа при формировании csv файла лишь не будет давать название классу, а будет написано "Нет Информации";
4. Как программа закончит кластеризацию, будет создан csv файл "clusters.csv", папка "clustered_audio" с разбиением кластеров по папкам и будут выведены метрики результата кластеризации. 
Используются такие метрики:
- **Средний силуэтный коэффициент** (Оптимальный результат: чем ближе значение к 1, тем лучше кластеризация.)

- **Индекс Дэвида-Болдуина** (Оптимальный результат: чем меньше индекс Дейвиса-Боулдина, тем лучше качество кластеризации. Низкие значения (ближе к 0) указывают на то, что кластеры компактные и удалены друг от друга. Более высокие значения могут означать, что кластеры перекрываются или имеют нечеткие границы.)

Примечание:
Csv файл содержит названия аудофайлов, номер их кластера и их название согласно разметке из excel файла
В папке "clustered_audio" копируются все обработанные аудиофайлы в соответствии с их кластерами. Для лучшей навигации рекомендуется использовать ранее созданый csv файл. Например, если в csv Автоответчик Алиса имеет номер 7, то скорее всего все аудиофайлы, в которых она была найдена, были помещены в папку "Cluster_7".

5. В конце программа создаст локальный сервер, в котором в 3D визуализации можно визуально увидеть аудиофайлы, сгруппированные по кластерам (Dash is running on http://127.0.0.1:XXXX/). Откройте эту ссылку, нажав мышкой компьютера. 
Все кластеры разделены между собой фигурами разным цветов. Визуализацию можно поворачивать, увеличивать и уменьшать с помощью мышки компьютера. При наведении на фигуру будет показываться название кластеризованного аудиофайла. Для прослушивания аудиофайла кликните по фигуре и ниже нажмите кнопку "Воспроизвести" на плеере. 
